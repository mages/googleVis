<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The gvisTreeMap function reads a data.frame and creates text output
referring to the Google Visualisation API, which can be included into a web
page, or as a stand-alone page. The actual chart is rendered by the web
browser."><title>Google Tree Map with R
treemap

gvisTreeMap — gvisTreeMap • googleVis</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Google Tree Map with R
treemap

gvisTreeMap — gvisTreeMap"><meta property="og:description" content="The gvisTreeMap function reads a data.frame and creates text output
referring to the Google Visualisation API, which can be included into a web
page, or as a stand-alone page. The actual chart is rendered by the web
browser."><meta property="og:image" content="https://mages.github.io/googleVis/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">googleVis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.13</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/googleVis_examples.html">googleVis examples</a>
    <a class="dropdown-item" href="../articles/googleVis_intro.html">Introduction to googleVis</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mages/googleVis/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Google Tree Map with R
treemap

gvisTreeMap</h1>
      <small class="dont-index">Source: <a href="https://github.com/mages/googleVis/blob/HEAD/R/gvisTreeMap.R" class="external-link"><code>R/gvisTreeMap.R</code></a></small>
      <div class="d-none name"><code>gvisTreeMap.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The gvisTreeMap function reads a data.frame and creates text output
referring to the Google Visualisation API, which can be included into a web
page, or as a stand-alone page. The actual chart is rendered by the web
browser.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">gvisTreeMap</span><span class="op">(</span>
  <span class="va">data</span>,
  idvar <span class="op">=</span> <span class="st">""</span>,
  parentvar <span class="op">=</span> <span class="st">""</span>,
  sizevar <span class="op">=</span> <span class="st">""</span>,
  colorvar <span class="op">=</span> <span class="st">""</span>,
  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,
  <span class="va">chartid</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>a <code>data.frame</code>. The data has to have at least four columns.
Each row in the data table describes one node (a rectangle in the graph).
Each node (except the root node) has one or more parent nodes. Each node is
sized and colored according to its values relative to the other nodes
currently shown.</p></dd>
<dt>idvar</dt>
<dd><p>column name of <code>data</code> describing the ID for each node. It
can be any valid JavaScript string, including spaces, and any length that a
string can hold. This value is displayed as the node header.</p></dd>
<dt>parentvar</dt>
<dd><p>column name of <code>data</code> that match to entries in
<code>idvar</code>. If this is a root node, leave this <code>NA</code>. Only one root is
allowed per treemap.</p></dd>
<dt>sizevar</dt>
<dd><p>column name of <code>data</code> with positive values to define the
size of maps.  Any positive value is allowed. This value determines the size
of the node, computed relative to all other nodes currently shown. This
value is ignored for non-leaf nodes (it is actually calculated from the size
of all its children).</p></dd>
<dt>colorvar</dt>
<dd><p>column name of <code>data</code> with values to define range of
color. The value is used to calculate a color for this node. Any value,
positive or negative, is allowed. The color value is first recomputed on a
scale from <code>minColorValue</code> to <code>maxColorValue</code>, and then the node
is assigned a color from the gradient between <code>minColor</code> and
<code>maxColor</code>.</p></dd>
<dt>options</dt>
<dd><p>list of configuration options, see:</p>
<p><!-- % START DYNAMIC CONTENT --></p>
<p><a href="https://developers.google.com/chart/interactive/docs/gallery/treemap#Configuration_Options" class="external-link">https://developers.google.com/chart/interactive/docs/gallery/treemap#Configuration_Options</a></p>
<p>The parameters can be set via a named list. The parameters have to map those
of the Google documentation. 
</p><ul><li><p>Boolean arguments are set to 
either <code>TRUE</code> or <code>FALSE</code>, using the R syntax.</p></li>
<li><p>Google API parameters with a single value and with names that don't 
include a "." are set like one would do in R, that is 
<code>options=list(width=200, height=300)</code>. 
Exceptions to this rule are the width and height options for 
<code><a href="gvisAnnotatedTimeLine.html">gvisAnnotatedTimeLine</a></code> and <code><a href="gvisAnnotationChart.html">gvisAnnotationChart</a></code>.
For those two functions, width and height must be character strings of the 
format <code>"Xpx"</code>, where <code>X</code> is a number, or <code>"automatic"</code>. 
For example, 
<code>options=list(width="200px", height="300px")</code>.</p></li>
<li><p>Google API parameters with names that don't include a ".", but require 
multivalues are set as a character, wrapped in "[ ]" and separated by commas, 
e.g. <code>options=list(colors="['#cbb69d', '#603913', '#c69c6e']")</code></p></li>
<li><p>Google API parameters with names that do include a "." present parameters with 
several sub-options and have to be set as a character wrapped in " ".
The values of those sub-options are set via parameter:value. Boolean values
have to be stated as <code>'true'</code> or <code>'false'</code>. 
For example the Google documentaion states the formating options for the 
vertical axis and states the parameter as <code>vAxis.format</code>. 
Then this paramter can be set in R as:<code>options=list(vAxis="{format:'#,###%'}")</code>.</p></li>
<li><p>If several sub-options have to be set, e.g. <code>titleTextStyle.color</code>, <code>titleTextStyle.fontName</code> and 
<code>titleTextStyle.fontSize</code>, then those can be combined in one list item 
such as:<code>options=list(titleTextStyle="{color:'red', fontName:'Courier', fontSize:16}")</code></p></li>
<li><p>paramters that can have more than one value per sub-options are 
wrapped in "[ ]". For example to set the labels for left and right axes use:<code>options=list(vAxes="[{title:'val1'}, {title:'val2'}]")</code></p></li>
<li><p><code>gvis.editor</code> a character label for an
 on-page button that opens an in-page dialog box enabling
users to edit, change and customise the chart. By default no
value is given and therefore no button is displayed.</p></li>
</ul>
For more details see the Google API documentation and the R examples below.</dd>
<dt>chartid</dt>
<dd><p>character. If missing (default) a random chart id will be 
generated based on chart type and <code><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></code></p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>gvisTreeMap
 returns list 
of <code><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></code>"<code>gvis</code>" and "<code>list</code>".   
An object of class "<code>gvis</code>" is a list containing at least the
following components:
</p><dl><dt><code>type</code></dt>
<dd><p>Google visualisation type</p></dd><dt><code>chartid</code></dt>
<dd><p>character id of the chart object. Unique chart
ids are required to place several charts on the same page.</p></dd><dt><code>html</code></dt>
<dd><p>a list with the building blocks for a page</p><dl><dt><code>header</code></dt>
<dd><p>a character string of a html page header:
<code>&lt;html&gt;...&lt;body&gt;</code>,</p></dd><dt><code>chart</code></dt>
<dd><p>a named character vector of the chart's building blocks:</p><dl><dt><code>jsHeader</code></dt>
<dd><p>Opening <code>&lt;script&gt;</code> tag and
reference to Google's JavaScript library.</p></dd><dt><code>jsData</code></dt>
<dd><p>JavaScript function defining the input
<code>data</code> as a JSON object.</p></dd><dt><code>jsDrawChart</code></dt>
<dd><p>JavaScript function combing the data with 
the visualisation API and user options.</p></dd><dt><code>jsDisplayChart</code></dt>
<dd><p>JavaScript function calling the
handler to display the chart.</p></dd><dt><code>jsFooter</code></dt>
<dd><p>End tag <code>&lt;/script&gt;</code>.</p></dd><dt><code>jsChart</code></dt>
<dd><p>Call of the <code>jsDisplayChart</code> function.</p></dd><dt><code>divChart</code></dt>
<dd><p><code>&lt;div&gt;</code> container to embed the chart
into the page.</p></dd></dl></dd><dt><code>caption</code></dt>
<dd><p>character string of a standard caption,
including data name and chart id.</p></dd><dt><code>footer</code></dt>
<dd><p>character string of a html page footer:
<code>&lt;/body&gt;...&lt;/html&gt;</code>, including the used R and googleVis version
and link to Google's Terms of Use.</p></dd></dl></dd></dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A tree map is a visual representation of a data tree, where each node can
have zero or more children, and one parent (except for the root, which has
no parents). Each node is displayed as a rectangle, sized and colored
according to values that you assign. Sizes and colors are valued relative to
all other nodes in the graph. You can specify how many levels to display
simultaneously, and optionally to display deeper levels in a hinted fashion.
If a node is a leaf node, you can specify a size and color; if it is not a
leaf, it will be displayed as a bounding box for leaf nodes. The default
behavior is to move down the tree when a user left-clicks a node, and to
move back up the tree when a user right-clicks the graph.</p>
<p>The total size of the graph is determined by the size of the containing
element that you insert in your page. If you have leaf nodes with names too
long to show, the name will be truncated with an ellipsis (...).</p>
    </div>
    <div class="section level2">
    <h2 id="warning-">Warning <a class="anchor" aria-label="anchor" href="#warning-"></a></h2>
    


<p>Tree maps display a tree like structure where every child has to have a
unique parent.</p>
<p>Values in column <code>sizevar</code> should be greater than zero and finite.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Google Chart Tools API: 
<a href="https://developers.google.com/chart/interactive/docs/gallery/treemap" class="external-link">https://developers.google.com/chart/interactive/docs/gallery/treemap</a></p>
<p><!-- % END DYNAMIC CONTENT --></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>See also <code><a href="gvisMethods.html">print.gvis</a></code>, <code><a href="gvisMethods.html">plot.gvis</a></code> for printing and
plotting methods.</p>
<p>Please note that the <code>treemap</code> package offeres a static version of tree
maps via its <code>tmPlot</code> function.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Markus Gesmann <a href="mailto:markus.gesmann@gmail.com">markus.gesmann@gmail.com</a>,</p>
<p>Diego de Castillo <a href="mailto:decastillo@gmail.com">decastillo@gmail.com</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co">## Please note that by default the googleVis plot command</span></span>
<span class="r-in"><span class="co">## will open a browser window and requires Internet</span></span>
<span class="r-in"><span class="co">## connection to display the visualisation.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">Tree</span> <span class="op">&lt;-</span> <span class="fu">gvisTreeMap</span><span class="op">(</span><span class="va">Regions</span>,  idvar<span class="op">=</span><span class="st">"Region"</span>, parentvar<span class="op">=</span><span class="st">"Parent"</span>,</span>
<span class="r-in">                    sizevar<span class="op">=</span><span class="st">"Val"</span>, colorvar<span class="op">=</span><span class="st">"Fac"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Tree</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">Tree2</span> <span class="op">&lt;-</span> <span class="fu">gvisTreeMap</span><span class="op">(</span><span class="va">Regions</span>,  <span class="st">"Region"</span>, <span class="st">"Parent"</span>, <span class="st">"Val"</span>, <span class="st">"Fac"</span>,</span>
<span class="r-in">                    options<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>width<span class="op">=</span><span class="fl">600</span>, height<span class="op">=</span><span class="fl">500</span>,</span>
<span class="r-in">                                 fontSize<span class="op">=</span><span class="fl">16</span>,</span>
<span class="r-in">                                 minColor<span class="op">=</span><span class="st">'#EDF8FB'</span>,</span>
<span class="r-in">                                 midColor<span class="op">=</span><span class="st">'#66C2A4'</span>,</span>
<span class="r-in">                                 maxColor<span class="op">=</span><span class="st">'#006D2C'</span>,</span>
<span class="r-in">                                 headerHeight<span class="op">=</span><span class="fl">20</span>,</span>
<span class="r-in">                                 fontColor<span class="op">=</span><span class="st">'black'</span>,</span>
<span class="r-in">                                 showScale<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">Tree2</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Simple static treemap with no drill down options based on US states</span></span>
<span class="r-in"><span class="co">## and their area. However we still have to create a parent id to use</span></span>
<span class="r-in"><span class="co">## gvisTreeMap</span></span>
<span class="r-in"> </span>
<span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va">datasets</span><span class="op">)</span></span>
<span class="r-in"><span class="va">states</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">state.name</span>, <span class="va">state.area</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Create parent variable</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">total</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>state.area<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">states</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span>, state.name<span class="op">=</span><span class="st">"USA"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">my.states</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">total</span>, <span class="va">states</span><span class="op">)</span></span>
<span class="r-in"><span class="va">my.states</span><span class="op">$</span><span class="va">parent</span><span class="op">=</span><span class="st">"USA"</span></span>
<span class="r-in"><span class="co">## Set parent variable to NA at root level</span></span>
<span class="r-in"><span class="va">my.states</span><span class="op">$</span><span class="va">parent</span><span class="op">[</span><span class="va">my.states</span><span class="op">$</span><span class="va">state.name</span><span class="op">==</span><span class="st">"USA"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">my.states</span><span class="op">$</span><span class="va">state.area.log</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">my.states</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span></span>
<span class="r-in"><span class="va">statesTree</span> <span class="op">&lt;-</span> <span class="fu">gvisTreeMap</span><span class="op">(</span><span class="va">my.states</span>, <span class="st">"state.name"</span>, <span class="st">"parent"</span>,</span>
<span class="r-in">                          <span class="st">"state.area"</span>, <span class="st">"state.area.log"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">statesTree</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## We add US regions to the above data set to enable drill down capabilities</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">states2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">state.region</span>, <span class="va">state.name</span>, <span class="va">state.area</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region.area<span class="op">=</span><span class="va">states2</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span>,</span>
<span class="r-in">                     <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region<span class="op">=</span><span class="va">state.region</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">my.states2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>regionid<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USA"</span>,</span>
<span class="r-in">                                    <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">regions</span><span class="op">$</span><span class="va">region</span><span class="op">)</span>,</span>
<span class="r-in">                                    <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">states2</span><span class="op">$</span><span class="va">state.name</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">                         parentid<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"USA"</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span class="r-in">                                   <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">states2</span><span class="op">$</span><span class="va">state.region</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">                         state.area<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">states2</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span>,</span>
<span class="r-in">                                      <span class="va">regions</span><span class="op">$</span><span class="va">region.area</span>, <span class="va">states2</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">my.states2</span><span class="op">$</span><span class="va">state.area.log</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">my.states2</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">statesTree2</span> <span class="op">&lt;-</span> <span class="fu">gvisTreeMap</span><span class="op">(</span><span class="va">my.states2</span>, <span class="st">"regionid"</span>, <span class="st">"parentid"</span>,</span>
<span class="r-in">                           <span class="st">"state.area"</span>, <span class="st">"state.area.log"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">statesTree2</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Now we add another layer with US divisions</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">states3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">state.region</span>, <span class="va">state.division</span>, <span class="va">state.name</span>, <span class="va">state.area</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">regions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region.area<span class="op">=</span><span class="va">states3</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span>,</span>
<span class="r-in">                     <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>region<span class="op">=</span><span class="va">state.region</span><span class="op">)</span>, <span class="va">sum</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">divisions</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aggregate.html" class="external-link">aggregate</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>division.area<span class="op">=</span><span class="va">states3</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span>,</span>
<span class="r-in">                     <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>division<span class="op">=</span><span class="va">state.division</span>, region<span class="op">=</span><span class="va">state.region</span><span class="op">)</span>,</span>
<span class="r-in">                     <span class="va">sum</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">my.states3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>regionid<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"USA"</span>,</span>
<span class="r-in">                                    <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">regions</span><span class="op">$</span><span class="va">region</span><span class="op">)</span>,</span>
<span class="r-in">                                    <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">divisions</span><span class="op">$</span><span class="va">division</span><span class="op">)</span>,</span>
<span class="r-in">                                    <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">states3</span><span class="op">$</span><span class="va">state.name</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">                         parentid<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"USA"</span>, <span class="fl">4</span><span class="op">)</span>, </span>
<span class="r-in">                                   <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">divisions</span><span class="op">$</span><span class="va">region</span><span class="op">)</span>,</span>
<span class="r-in">                                   <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">states3</span><span class="op">$</span><span class="va">state.division</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">                         state.area<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">states3</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span>,</span>
<span class="r-in">                                      <span class="va">regions</span><span class="op">$</span><span class="va">region.area</span>,</span>
<span class="r-in">                                      <span class="va">divisions</span><span class="op">$</span><span class="va">division.area</span>,</span>
<span class="r-in">                                      <span class="va">states3</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">my.states3</span><span class="op">$</span><span class="va">state.area.log</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log</a></span><span class="op">(</span><span class="va">my.states3</span><span class="op">$</span><span class="va">state.area</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">statesTree3</span> <span class="op">&lt;-</span> <span class="fu">gvisTreeMap</span><span class="op">(</span><span class="va">my.states3</span>, <span class="st">"regionid"</span>, <span class="st">"parentid"</span>,</span>
<span class="r-in">                           <span class="st">"state.area"</span>, <span class="st">"state.area.log"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">statesTree3</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Markus Gesmann, Diego de Castillo.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

